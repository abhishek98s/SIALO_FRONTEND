"use client";

import Link from "next/link";

import styles from './sidebar.module.scss';
import { usePathname, useRouter } from "next/navigation";
import { useAppDispatch } from "@/lib/hooks";
import { logout } from "@/lib/features/auth.slice";

export default function Sidebar() {
    const pathname = usePathname();
    const length = pathname.split('/').length;
    const currentPath = pathname.split('/')[length - 1];
    const dispatch = useAppDispatch();
    const router = useRouter();

    const onLogout = () => {
        dispatch(logout());
        localStorage.clear();
        router.push('/login');
    }

    return (
        <div className={`${styles.sidebar_wrapper} sidebar h-[85px] fixed bottom-0 left-0 right-0 z-10 bg-neutral-90 border-neutral-86 px-[22px] pt-[12px] pb-[16px]`}>
            <ul className="flex justify-between max-w-[500px] mx-auto">
                <Link href={'/'}>
                    <li className={`${currentPath == '' ? styles.active : ''} w-[60px]`}>
                        <div className="max-w-[40px] w-full h-[40px] flex-center mx-auto">
                            <svg width="18" height="21" viewBox="0 0 18 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M17 6.81075L11 1.55079C10.45 1.05884 9.73796 0.786865 9.00003 0.786865C8.2621 0.786865 7.55006 1.05884 7.00005 1.55079L1.00009 6.81075C0.682458 7.09483 0.428992 7.44331 0.256565 7.83299C0.0841379 8.22268 -0.00329254 8.64462 9.47934e-05 9.07074V17.8107C9.47934e-05 18.6063 0.316163 19.3694 0.878768 19.932C1.44137 20.4946 2.20443 20.8107 3.00007 20.8107H15C15.7956 20.8107 16.5587 20.4946 17.1213 19.932C17.6839 19.3694 18 18.6063 18 17.8107V9.06074C18.0019 8.6363 17.9138 8.21628 17.7414 7.82843C17.5691 7.44057 17.3163 7.09371 17 6.81075ZM11 18.8107H7.00005V13.8107C7.00005 13.5455 7.1054 13.2911 7.29294 13.1036C7.48047 12.9161 7.73482 12.8107 8.00004 12.8107H10C10.2652 12.8107 10.5196 12.9161 10.7071 13.1036C10.8947 13.2911 11 13.5455 11 13.8107V18.8107ZM16 17.8107C16 18.0759 15.8946 18.3302 15.7071 18.5178C15.5196 18.7053 15.2652 18.8107 15 18.8107H13V13.8107C13 13.0151 12.6839 12.252 12.1213 11.6894C11.5587 11.1268 10.7957 10.8107 10 10.8107H8.00004C7.20439 10.8107 6.44134 11.1268 5.87873 11.6894C5.31613 12.252 5.00006 13.0151 5.00006 13.8107V18.8107H3.00007C2.73486 18.8107 2.48051 18.7053 2.29297 18.5178C2.10544 18.3302 2.00008 18.0759 2.00008 17.8107V9.06074C2.00026 8.91875 2.03067 8.77844 2.0893 8.64912C2.14792 8.5198 2.23341 8.40445 2.34008 8.31074L8.34004 3.06078C8.52252 2.90046 8.75712 2.81205 9.00003 2.81205C9.24294 2.81205 9.47754 2.90046 9.66003 3.06078L15.66 8.31074C15.7667 8.40445 15.8521 8.5198 15.9108 8.64912C15.9694 8.77844 15.9998 8.91875 16 9.06074V17.8107Z" fill="#E5F5D6" />
                            </svg>
                        </div>

                        <h6 className="text-center text-[14px] color-primary-10 leading-none">Home</h6>
                    </li>
                </Link>

                <Link href={'/search'}>
                    <li className={`${currentPath == 'search' ? styles.active : ''} w-[60px]`}>
                        <div className="max-w-[40px] w-full h-[40px] flex-center mx-auto">
                            <svg width="21" height="21" viewBox="0 0 21 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M19.1666 19.7988L14.6105 15.2427M14.6105 15.2427C15.3418 14.5114 15.9218 13.6432 16.3176 12.6878C16.7134 11.7323 16.9171 10.7082 16.9171 9.67405C16.9171 8.63987 16.7134 7.6158 16.3176 6.66034C15.9218 5.70487 15.3418 4.83671 14.6105 4.10543C13.8792 3.37415 13.011 2.79406 12.0556 2.39829C11.1001 2.00253 10.076 1.79883 9.04185 1.79883C8.00766 1.79883 6.9836 2.00253 6.02813 2.39829C5.07267 2.79406 4.20451 3.37415 3.47323 4.10543C1.99634 5.58232 1.16663 7.58541 1.16663 9.67405C1.16663 11.7627 1.99634 13.7658 3.47323 15.2427C4.95012 16.7196 6.95321 17.5493 9.04185 17.5493C11.1305 17.5493 13.1336 16.7196 14.6105 15.2427Z" stroke="#E5F5D6" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                            </svg>
                        </div>

                        <h6 className="text-center text-[14px] color-primary-10 leading-none">Search</h6>
                    </li>
                </Link>

                <Link href={'/settings'}>
                    <li className={`${currentPath == 'settings' ? styles.active : ''} w-[60px]`}>
                        <div className="max-w-[40px] w-full h-[40px] flex-center mx-auto">
                            <svg width="23" height="24" viewBox="0 0 23 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M11.3335 14.9774C13.0891 14.9774 14.5123 13.5542 14.5123 11.7986C14.5123 10.043 13.0891 8.61975 11.3335 8.61975C9.57787 8.61975 8.15466 10.043 8.15466 11.7986C8.15466 13.5542 9.57787 14.9774 11.3335 14.9774Z" stroke="#E5F5D6" strokeWidth="1.7783" />
                                <path d="M20.1695 13.2409C19.9214 13.0901 19.7157 12.8787 19.5717 12.6267C19.4277 12.3746 19.3501 12.0901 19.3462 11.7998C19.3462 11.2075 19.6683 10.6713 20.1695 10.3566C20.5096 10.1426 20.7289 9.97197 20.8858 9.76852C21.0552 9.54766 21.1795 9.29558 21.2515 9.02668C21.3235 8.75779 21.3418 8.47734 21.3054 8.20136C21.2503 7.78387 21.0034 7.35579 20.5107 6.50069C20.0158 5.64558 19.7689 5.21856 19.4352 4.96107C19.2143 4.79163 18.9622 4.66736 18.6933 4.59537C18.4244 4.52337 18.144 4.50505 17.868 4.54147C17.6137 4.57537 17.3562 4.67922 16.9991 4.86783C16.7445 5.00708 16.4586 5.07935 16.1684 5.07787C15.8781 5.07638 15.593 5.00119 15.3398 4.85935C15.0902 4.7109 14.8824 4.50146 14.736 4.25068C14.5896 3.9999 14.5093 3.71602 14.5027 3.4257C14.4878 3.02305 14.4497 2.74755 14.3512 2.51125C14.2447 2.25396 14.0885 2.02018 13.8916 1.82327C13.6947 1.62637 13.4609 1.4702 13.2036 1.3637C12.8147 1.20264 12.3209 1.20264 11.3334 1.20264C10.3458 1.20264 9.85205 1.20264 9.46318 1.3637C9.20588 1.4702 8.9721 1.62637 8.7752 1.82327C8.57829 2.02018 8.42212 2.25396 8.31562 2.51125C8.21814 2.74755 8.17893 3.02305 8.1641 3.4257C8.15749 3.71602 8.07721 3.9999 7.93078 4.25068C7.78436 4.50146 7.57659 4.7109 7.327 4.85935C7.07365 5.00138 6.78834 5.07668 6.4979 5.07816C6.20745 5.07964 5.92139 5.00727 5.6666 4.86783C5.31057 4.67922 5.05202 4.57537 4.79772 4.54147C4.2407 4.46822 3.67739 4.61914 3.23161 4.96107C2.89889 5.21856 2.65095 5.64558 2.15717 6.50069C1.93677 6.88215 1.76617 7.17778 1.63902 7.42573C1.27556 8.27589 0.938373 10.0525 2.4973 10.3577C2.9985 10.6713 3.32062 11.2075 3.32062 11.7987C3.32062 12.39 2.9985 12.9262 2.4973 13.2398C2.15717 13.4549 1.93677 13.6255 1.78101 13.8289C1.61157 14.0498 1.4873 14.3019 1.4153 14.5708C1.3433 14.8397 1.32499 15.1201 1.3614 15.3961C1.4165 15.8136 1.66339 16.2417 2.15611 17.0968C2.65095 17.9519 2.89784 18.3789 3.23161 18.6364C3.45247 18.8058 3.70455 18.9301 3.97345 19.0021C4.24235 19.0741 4.5228 19.0924 4.79878 19.056C5.05308 19.0221 5.31057 18.9183 5.6666 18.7296C5.92139 18.5902 6.20745 18.5178 6.4979 18.5193C6.78834 18.5208 7.07365 18.5961 7.327 18.7381C7.8388 19.0348 8.1429 19.5805 8.1641 20.1718C8.17893 20.5744 8.21708 20.8499 8.31562 21.0862C8.42212 21.3435 8.57829 21.5773 8.7752 21.7742C8.9721 21.9711 9.20588 22.1273 9.46318 22.2338C9.85205 22.3948 10.3458 22.3948 11.3334 22.3948C12.3209 22.3948 12.8147 22.3948 13.2036 22.2338C13.4609 22.1273 13.6947 21.9711 13.8916 21.7742C14.0885 21.5773 14.2447 21.3435 14.3512 21.0862C14.4486 20.8499 14.4878 20.5744 14.5027 20.1718C14.5239 19.5805 14.828 19.0337 15.3398 18.7381C15.5931 18.5961 15.8784 18.5208 16.1689 18.5193C16.4593 18.5178 16.7454 18.5902 17.0002 18.7296C17.3562 18.9183 17.6148 19.0221 17.8691 19.056C18.4261 19.1293 18.9894 18.9783 19.4352 18.6364C19.7689 18.38 20.0158 17.9519 20.5096 17.0968C20.73 16.7153 20.9006 16.4197 21.0278 16.1717C21.3912 15.4205 21.7283 13.812 20.1695 13.3881" stroke="#E5F5D6" strokeWidth="1.7783" strokeLinecap="round" />
                            </svg>
                        </div>

                        <h6 className="text-center text-[14px] color-primary-10 leading-none">Settings</h6>
                    </li>
                </Link>

                <button onClick={onLogout}>
                    <li className={`w-[60px]`}>
                        <div className="max-w-[40px] w-full h-[40px] flex-center mx-auto">
                            <svg width="18" height="24" viewBox="0 0 18 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M0 11.7988C0 12.0972 0.118527 12.3833 0.329505 12.5943C0.540484 12.8053 0.826631 12.9238 1.125 12.9238H9.66375L7.07625 15.5001C6.97081 15.6047 6.88711 15.7291 6.83 15.8662C6.77288 16.0033 6.74348 16.1503 6.74348 16.2988C6.74348 16.4473 6.77288 16.5944 6.83 16.7315C6.88711 16.8686 6.97081 16.993 7.07625 17.0976C7.18083 17.203 7.30526 17.2867 7.44235 17.3438C7.57944 17.4009 7.72649 17.4304 7.875 17.4304C8.02351 17.4304 8.17056 17.4009 8.30765 17.3438C8.44474 17.2867 8.56917 17.203 8.67375 17.0976L13.1737 12.5976C13.2762 12.4906 13.3565 12.3644 13.41 12.2263C13.5225 11.9524 13.5225 11.6452 13.41 11.3713C13.3565 11.2332 13.2762 11.1071 13.1737 11.0001L8.67375 6.50008C8.56886 6.39518 8.44433 6.31198 8.30728 6.25521C8.17023 6.19844 8.02334 6.16922 7.875 6.16922C7.72666 6.16922 7.57977 6.19844 7.44272 6.25521C7.30567 6.31198 7.18114 6.39518 7.07625 6.50008C6.97136 6.60497 6.88815 6.7295 6.83138 6.86655C6.77461 7.0036 6.7454 7.15049 6.7454 7.29883C6.7454 7.44717 6.77461 7.59406 6.83138 7.73111C6.88815 7.86816 6.97136 7.99268 7.07625 8.09758L9.66375 10.6738H1.125C0.826631 10.6738 0.540484 10.7924 0.329505 11.0033C0.118527 11.2143 0 11.5005 0 11.7988ZM14.625 0.548828H3.375C2.47989 0.548828 1.62145 0.904408 0.988515 1.53734C0.355579 2.17028 0 3.02872 0 3.92383V7.29883C0 7.5972 0.118527 7.88334 0.329505 8.09432C0.540484 8.3053 0.826631 8.42383 1.125 8.42383C1.42337 8.42383 1.70952 8.3053 1.92049 8.09432C2.13147 7.88334 2.25 7.5972 2.25 7.29883V3.92383C2.25 3.62546 2.36853 3.33931 2.5795 3.12833C2.79048 2.91735 3.07663 2.79883 3.375 2.79883H14.625C14.9234 2.79883 15.2095 2.91735 15.4205 3.12833C15.6315 3.33931 15.75 3.62546 15.75 3.92383V19.6738C15.75 19.9722 15.6315 20.2583 15.4205 20.4693C15.2095 20.6803 14.9234 20.7988 14.625 20.7988H3.375C3.07663 20.7988 2.79048 20.6803 2.5795 20.4693C2.36853 20.2583 2.25 19.9722 2.25 19.6738V16.2988C2.25 16.0005 2.13147 15.7143 1.92049 15.5033C1.70952 15.2924 1.42337 15.1738 1.125 15.1738C0.826631 15.1738 0.540484 15.2924 0.329505 15.5033C0.118527 15.7143 0 16.0005 0 16.2988V19.6738C0 20.5689 0.355579 21.4274 0.988515 22.0603C1.62145 22.6932 2.47989 23.0488 3.375 23.0488H14.625C15.5201 23.0488 16.3786 22.6932 17.0115 22.0603C17.6444 21.4274 18 20.5689 18 19.6738V3.92383C18 3.02872 17.6444 2.17028 17.0115 1.53734C16.3786 0.904408 15.5201 0.548828 14.625 0.548828Z" fill="#E5F5D6" />
                            </svg>
                        </div>

                        <h6 className="text-center text-[14px] color-primary-10 leading-none">Log out</h6>
                    </li>
                </button>
            </ul>
        </div>
    )
}
